<!doctype html>
<html>

<head>
	<script>
		window.$ = window.jQuery = require('jquery');
	</script>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>FastFlow</title>
	<link href="css/mui.min.css" rel="stylesheet" type="text/css" />
	<link href="css/style.css" rel="stylesheet" type="text/css" />
	<link href="css/flow.css" rel="stylesheet" type="text/css" />
	<link href="../node_modules/font-awesome/css/font-awesome.css" rel="stylesheet" type="text/css" />


	<script src="../node_modules/angular/angular.min.js"></script>
	<script src="../node_modules/angular-sanitize/angular-sanitize.min.js"></script>
	<script src="../node_modules/jquery/dist/jquery.js"></script>
	<script src="js/mui.min.js"></script>

	<script>
		$(function() {
			$("#common").load("common.html");
		});
	</script>
</head>

<body>
	<div id="common"></div>
	<div id="content-wrapper" style="overflow: auto;">
		<div class="mui--appbar-height"></div>

		<div class="mui-container-fluid" ng-app="flowing" ng-controller="flowController">
			<ffcardref title="Extent of American Troop Presence in Okinawa"></ffcardref>
			<table id="flowspace">
				<div class="row" ng-repeat="r in flow track by $index">
					{{$index + 1}}
					<span class="cell mui-panel" ng-repeat="cell in r track by $index">
						<div contenteditable="true" ng-model="cell.text" class="textbox"></div>

						<button class="mui-btn mui-btn--fab mui-btn--primary cardButton" ng-click="r.cards.push('memes')">
							<span class="fa fa-archive fa-fw" aria-hidden="true"></span>
						</button>
						<button class="mui-btn mui-btn--fab mui-btn--primary cardButton" ng-click="cell.cards.push({'tag':'memes', 'content':'swag'})">
							<span class="fa fa-plus fa-fw" aria-hidden="true"></span>
						</button>

						<div class="card mui-panel" ng-repeat="card in cell.cards">
							<input type="text" class="tagInput" ng-model="card.tag">
							<textarea ng-model="card.content"></textarea>
						</div>
					</span>
					<button class="mui-btn mui-btn--fab mui-btn--primary" ng-click="r.push({'text': 'Racism is bad','cards': [{'tag': 'Yaomomoako', 'content': 'stuff like racism is bad'}]})">+</button>
				</div>

				<button class="mui-btn mui-btn--fab mui-btn--primary" ng-click="flow.push([{'text': 'Bad is unjust','cards': []}])">C</button>
			</table>
		</div>
	</div>
	<script src="flow/flow2.js"></script>
</body>

</html>
